{"ast":null,"code":"import { $host, $authhost } from \"./index\";\nexport const registration = async (login, password, firstname, lastname) => {\n  try {\n    const token = await $host.post('api/user/registration', {\n      login,\n      password,\n      firstname,\n      lastname\n    });\n    localStorage.setItem('Token', token.data);\n    localStorage.setItem('userAuth', true);\n  } catch (error) {\n    var _error$response, _error$response$data;\n    alert((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message);\n  }\n};\nexport const login = async (login, password) => {\n  try {\n    const token = await $host.post('api/user/login', {\n      login,\n      password\n    });\n    localStorage.setItem('Token', token.data);\n    localStorage.setItem('userAuth', true);\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    alert((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message);\n  }\n};\nexport const logout = async () => {\n  try {\n    await $host.post('api/user/logout', {\n      withCredentials: true\n    });\n    localStorage.removeItem('Token');\n    localStorage.removeItem('userAuth');\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    alert((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message);\n  }\n};\nexport const checkAuth = async () => {\n  try {\n    const token = await $host.get('api/user/refresh', {\n      withCredentials: true\n    });\n    if (token) {\n      localStorage.setItem('userAuth', true);\n      localStorage.setItem('Token', token.data);\n    }\n    return token;\n  } catch (error) {\n    var _error$response4, _error$response4$data;\n    alert((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message);\n  }\n};\nexport const userData = async () => {\n  const {\n    data\n  } = await $authhost.get('api/user/data');\n  return data;\n};","map":{"version":3,"names":["$host","$authhost","registration","login","password","firstname","lastname","token","post","localStorage","setItem","data","error","_error$response","_error$response$data","alert","response","message","_error$response2","_error$response2$data","logout","withCredentials","removeItem","_error$response3","_error$response3$data","checkAuth","get","_error$response4","_error$response4$data","userData"],"sources":["C:/Users/ivana/OneDrive/Документы/Projects/Corp/client/src/http/userAPI.js"],"sourcesContent":["import { $host, $authhost } from \"./index\";\r\nexport const registration = async (login, password, firstname, lastname) => {\r\n    try {\r\n        const token = await $host.post('api/user/registration', {login, password, firstname, lastname})\r\n        localStorage.setItem('Token', token.data)\r\n        localStorage.setItem('userAuth', true)\r\n    } catch (error) {\r\n        alert(error.response?.data?.message)\r\n    }\r\n}\r\n\r\nexport const login = async (login, password) => {\r\n    try {\r\n        const token = await $host.post('api/user/login', {login, password})\r\n        localStorage.setItem('Token', token.data) \r\n        localStorage.setItem('userAuth', true)  \r\n    } catch (error) {\r\n        alert(error.response?.data?.message)\r\n    }\r\n}\r\nexport const logout = async () => {\r\n    try {\r\n        await $host.post('api/user/logout', {withCredentials: true})\r\n        localStorage.removeItem('Token')\r\n        localStorage.removeItem('userAuth')\r\n    } catch (error) {\r\n        alert(error.response?.data?.message)\r\n    }\r\n}\r\nexport const checkAuth = async () =>{\r\n    try {\r\n        const token = await $host.get('api/user/refresh', {withCredentials: true})\r\n        if(token) {\r\n            localStorage.setItem('userAuth', true)\r\n            localStorage.setItem('Token', token.data)\r\n        }\r\n        return token\r\n    } catch (error) {\r\n        alert(error.response?.data?.message)\r\n    }\r\n}\r\nexport const userData = async () => {\r\n    const {data} = await $authhost.get('api/user/data')\r\n    return data\r\n}"],"mappings":"AAAA,SAASA,KAAK,EAAEC,SAAS,QAAQ,SAAS;AAC1C,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,KAAK;EACxE,IAAI;IACA,MAAMC,KAAK,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,uBAAuB,EAAE;MAACL,KAAK;MAAEC,QAAQ;MAAEC,SAAS;MAAEC;IAAQ,CAAC,CAAC;IAC/FG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAACI,IAAI,CAAC;IACzCF,YAAY,CAACC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC;EAC1C,CAAC,CAAC,OAAOE,KAAK,EAAE;IAAA,IAAAC,eAAA,EAAAC,oBAAA;IACZC,KAAK,EAAAF,eAAA,GAACD,KAAK,CAACI,QAAQ,cAAAH,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBF,IAAI,cAAAG,oBAAA,uBAApBA,oBAAA,CAAsBG,OAAO,CAAC;EACxC;AACJ,CAAC;AAED,OAAO,MAAMd,KAAK,GAAG,MAAAA,CAAOA,KAAK,EAAEC,QAAQ,KAAK;EAC5C,IAAI;IACA,MAAMG,KAAK,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,gBAAgB,EAAE;MAACL,KAAK;MAAEC;IAAQ,CAAC,CAAC;IACnEK,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAACI,IAAI,CAAC;IACzCF,YAAY,CAACC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC;EAC1C,CAAC,CAAC,OAAOE,KAAK,EAAE;IAAA,IAAAM,gBAAA,EAAAC,qBAAA;IACZJ,KAAK,EAAAG,gBAAA,GAACN,KAAK,CAACI,QAAQ,cAAAE,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBP,IAAI,cAAAQ,qBAAA,uBAApBA,qBAAA,CAAsBF,OAAO,CAAC;EACxC;AACJ,CAAC;AACD,OAAO,MAAMG,MAAM,GAAG,MAAAA,CAAA,KAAY;EAC9B,IAAI;IACA,MAAMpB,KAAK,CAACQ,IAAI,CAAC,iBAAiB,EAAE;MAACa,eAAe,EAAE;IAAI,CAAC,CAAC;IAC5DZ,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC;IAChCb,YAAY,CAACa,UAAU,CAAC,UAAU,CAAC;EACvC,CAAC,CAAC,OAAOV,KAAK,EAAE;IAAA,IAAAW,gBAAA,EAAAC,qBAAA;IACZT,KAAK,EAAAQ,gBAAA,GAACX,KAAK,CAACI,QAAQ,cAAAO,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBZ,IAAI,cAAAa,qBAAA,uBAApBA,qBAAA,CAAsBP,OAAO,CAAC;EACxC;AACJ,CAAC;AACD,OAAO,MAAMQ,SAAS,GAAG,MAAAA,CAAA,KAAW;EAChC,IAAI;IACA,MAAMlB,KAAK,GAAG,MAAMP,KAAK,CAAC0B,GAAG,CAAC,kBAAkB,EAAE;MAACL,eAAe,EAAE;IAAI,CAAC,CAAC;IAC1E,IAAGd,KAAK,EAAE;MACNE,YAAY,CAACC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC;MACtCD,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,KAAK,CAACI,IAAI,CAAC;IAC7C;IACA,OAAOJ,KAAK;EAChB,CAAC,CAAC,OAAOK,KAAK,EAAE;IAAA,IAAAe,gBAAA,EAAAC,qBAAA;IACZb,KAAK,EAAAY,gBAAA,GAACf,KAAK,CAACI,QAAQ,cAAAW,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBhB,IAAI,cAAAiB,qBAAA,uBAApBA,qBAAA,CAAsBX,OAAO,CAAC;EACxC;AACJ,CAAC;AACD,OAAO,MAAMY,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAChC,MAAM;IAAClB;EAAI,CAAC,GAAG,MAAMV,SAAS,CAACyB,GAAG,CAAC,eAAe,CAAC;EACnD,OAAOf,IAAI;AACf,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}